<?xml version="1.0" encoding="UTF-8" ?>
<mapping-table>
  <!-- Mappings for DDI metadata version 3.x, more specifically 3.2. -->
  <namespaces>
    <namespace ns="ddi" uri="ddi:instance:3_2"/>
    <namespace ns="g" uri="ddi:group:3_2"/>
    <namespace ns="d" uri="ddi:datacollection:3_2"/>
    <namespace ns="s" uri="ddi:studyunit:3_2"/>
    <namespace ns="dc2" uri="http://purl.org/dc/elements/1.1/"/> <!-- In instance.xsd xmlns:dc="http://purl.org/dc/terms/" is used. Which version is correct? -->
    <namespace ns="r" uri="ddi:reusable:3_2"/>
    <namespace ns="c" uri="ddi:conceptualcomponent:3_2"/>
    <namespace ns="p" uri="ddi:physicaldataproduct:3_2"/>
    <namespace ns="a" uri="ddi:archive:3_2"/>
    <namespace ns="l" uri="ddi:logicalproduct:3_2"/>
    <namespace ns="pi" uri="ddi:physicalinstance:3_2"/>
  </namespaces>
  <mappings>
    <field name="Creator">
    </field>
    <field name="Contributor">
    </field>
    <field name="Language">
    </field>

    <!-- The date field is unstructured. A date unifying function will be implemented later. -->
    <field name="CreationDate">
    </field>
    <field name="Format">
      <xpath>/ddi:DDIInstance//p:PhysicalStructureScheme/p:PhysicalStructure/p:PhysicalStructure/p:FileFormat/text()</xpath>
    </field>
    <field name="Discipline">
    </field>
    <field name="Collection">
    </field>
    <field name="Country">
      <xpath>/ddi:DDIInstance/s:StudyUnit/r:Coverage/r:SpatialCoverage[./r:LowestLevelReference/r:LevelName/text() = 'Country']/r:Description[@xml:lang = 'en']/text()</xpath>
      <!-- fallback for missing lang -->
      <xpath>/ddi:DDIInstance/s:StudyUnit/r:Coverage/r:SpatialCoverage[./r:LowestLevelReference/r:LevelName/text() = 'Country']/r:Description/text()</xpath>
    </field>

    <field name="title">
    </field>
    <field name="notes">
      <xpath>/ddi:DDIInstance/s:StudyUnit/s:Abstract/r:Content[@xml:lang = 'en']/text()</xpath>
    </field>

    <field name="url">
    </field> 
    <field name="MetadataSource">
      <string expand="true">${filename}</string>
    </field>

    <field name="fulltext">
      <xpath>normalize-space(string(/))</xpath>
    </field>
  </mappings>
</mapping-table>
